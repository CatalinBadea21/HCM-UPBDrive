ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 1


   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"hybrid_mode.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	hybrid_state
  20              		.bss
  21              		.align	2
  22              		.type	hybrid_state, %object
  23              		.size	hybrid_state, 2
  24              	hybrid_state:
  25 0000 0000     		.space	2
  26              		.section	.text.TPS_to_Duty_Cycle_Percentage,"ax",%progbits
  27              		.align	2
  28              		.global	TPS_to_Duty_Cycle_Percentage
  29              		.thumb
  30              		.thumb_func
  31              		.type	TPS_to_Duty_Cycle_Percentage, %function
  32              	TPS_to_Duty_Cycle_Percentage:
  33              	.LFB63:
  34              		.file 1 "src\\hybrid_mode.c"
   1:src/hybrid_mode.c **** /*
   2:src/hybrid_mode.c ****  * File:        hybrid_mode.c
   3:src/hybrid_mode.c ****  * Description: Implements the hybrid drive control strategies for the HCM project. Based on curren
   4:src/hybrid_mode.c ****  *              vehicle status (gear, RPM, speed, TPS, brake state) and user input, this module 
   5:src/hybrid_mode.c ****  *              selects and applies the appropriate driving mode by updating the hybrid_state
   6:src/hybrid_mode.c ****  *              and transmitting the command via CAN to the ESC.
   7:src/hybrid_mode.c **** */
   8:src/hybrid_mode.c **** 
   9:src/hybrid_mode.c **** #include <include/hybrid_mode.h>
  10:src/hybrid_mode.c **** 
  11:src/hybrid_mode.c **** /*
  12:src/hybrid_mode.c **** ** Hybrid Strategy Modes **
  13:src/hybrid_mode.c ****   |----|-----------------------|-------------------------------------------------------|
  14:src/hybrid_mode.c ****   | ID | Name                  | Description                                           |
  15:src/hybrid_mode.c ****   |----|-----------------------|-------------------------------------------------------|
  16:src/hybrid_mode.c ****   | 0  | Freewheel             | Default idle mode                                     |
  17:src/hybrid_mode.c ****   | 1  | Manual (Boost)        | Full torque if boost button is active                 |
  18:src/hybrid_mode.c ****   | 2  | Launch Assist         | Active at low RPM, low speed, high TPS, gear 1        |
  19:src/hybrid_mode.c ****   | 3  | Auto No Regen         | Proportional torque, no regen                         |
  20:src/hybrid_mode.c ****   | 4  | Auto Brake Regen      | Regen on brake press                                  |
  21:src/hybrid_mode.c ****   | 5  | Auto TPS-Based Regen  | Regen when TPS < threshold or braking                 |
  22:src/hybrid_mode.c ****   |----|-----------------------|-------------------------------------------------------|
  23:src/hybrid_mode.c ****   *
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 2


  24:src/hybrid_mode.c ****   * Auto mode is mapping TPS from a threshold to 100
  25:src/hybrid_mode.c ****   * ! Boost button overrides any mode, as long as the strategy is not set to Freewheel (Hybrid OFF)
  26:src/hybrid_mode.c **** */
  27:src/hybrid_mode.c **** 
  28:src/hybrid_mode.c **** /**************************************************************************************************
  29:src/hybrid_mode.c **** * Global variables
  30:src/hybrid_mode.c **** ***************************************************************************************************
  31:src/hybrid_mode.c **** volatile HY_strategy_t hybrid_state = {0, 0};
  32:src/hybrid_mode.c **** 
  33:src/hybrid_mode.c **** /**************************************************************************************************
  34:src/hybrid_mode.c **** * Functions
  35:src/hybrid_mode.c **** ***************************************************************************************************
  36:src/hybrid_mode.c **** /*
  37:src/hybrid_mode.c ****  * Function:    TPS_to_Duty_Cycle_Percentage
  38:src/hybrid_mode.c ****  * Description: Converts the TPS value (over a threshold) to a proportional duty cycle.
  39:src/hybrid_mode.c ****  * Parameters:
  40:src/hybrid_mode.c ****  *   - tps_percentage: Throttle position sensor value from ECU [0–100].
  41:src/hybrid_mode.c ****  * Returns:
  42:src/hybrid_mode.c ****  *   - A duty cycle percentage [0–100], mapped linearly for TPS ≥ threshold.
  43:src/hybrid_mode.c ****  *     Returns 0 for TPS < threshold.
  44:src/hybrid_mode.c ****  */
  45:src/hybrid_mode.c **** uint8_t TPS_to_Duty_Cycle_Percentage(uint8_t tps_percentage)
  46:src/hybrid_mode.c **** {
  35              		.loc 1 46 0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 8
  38              		@ frame_needed = 1, uses_anonymous_args = 0
  39              		@ link register save eliminated.
  40 0000 80B4     		push	{r7}
  41              		.cfi_def_cfa_offset 4
  42              		.cfi_offset 7, -4
  43 0002 83B0     		sub	sp, sp, #12
  44              		.cfi_def_cfa_offset 16
  45 0004 00AF     		add	r7, sp, #0
  46              		.cfi_def_cfa_register 7
  47 0006 0346     		mov	r3, r0
  48 0008 FB71     		strb	r3, [r7, #7]
  47:src/hybrid_mode.c ****     if (tps_percentage < MAPPING_TPS_THRESHOLD)
  49              		.loc 1 47 0
  50 000a FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
  51 000c 312B     		cmp	r3, #49
  52 000e 01D8     		bhi	.L2
  48:src/hybrid_mode.c ****         return 0;
  53              		.loc 1 48 0
  54 0010 0023     		movs	r3, #0
  55 0012 0BE0     		b	.L3
  56              	.L2:
  49:src/hybrid_mode.c ****     else
  50:src/hybrid_mode.c ****         return ((tps_percentage - MAPPING_TPS_THRESHOLD ) * 100) / (100 - MAPPING_TPS_THRESHOLD);
  57              		.loc 1 50 0
  58 0014 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
  59 0016 6422     		movs	r2, #100
  60 0018 02FB03F3 		mul	r3, r2, r3
  61 001c A3F59C53 		sub	r3, r3, #4992
  62 0020 083B     		subs	r3, r3, #8
  63 0022 054A     		ldr	r2, .L4
  64 0024 A2FB0323 		umull	r2, r3, r2, r3
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 3


  65 0028 1B09     		lsrs	r3, r3, #4
  66 002a DBB2     		uxtb	r3, r3
  67              	.L3:
  51:src/hybrid_mode.c **** }
  68              		.loc 1 51 0
  69 002c 1846     		mov	r0, r3
  70 002e 0C37     		adds	r7, r7, #12
  71              		.cfi_def_cfa_offset 4
  72 0030 BD46     		mov	sp, r7
  73              		.cfi_def_cfa_register 13
  74              		@ sp needed
  75 0032 80BC     		pop	{r7}
  76              		.cfi_restore 7
  77              		.cfi_def_cfa_offset 0
  78 0034 7047     		bx	lr
  79              	.L5:
  80 0036 00BF     		.align	2
  81              	.L4:
  82 0038 1F85EB51 		.word	1374389535
  83              		.cfi_endproc
  84              	.LFE63:
  85              		.size	TPS_to_Duty_Cycle_Percentage, .-TPS_to_Duty_Cycle_Percentage
  86              		.section	.text.Map_Duty_Cycle,"ax",%progbits
  87              		.align	2
  88              		.global	Map_Duty_Cycle
  89              		.thumb
  90              		.thumb_func
  91              		.type	Map_Duty_Cycle, %function
  92              	Map_Duty_Cycle:
  93              	.LFB64:
  52:src/hybrid_mode.c **** 
  53:src/hybrid_mode.c **** /*
  54:src/hybrid_mode.c ****  * Function:    Map_Duty_Cycle
  55:src/hybrid_mode.c ****  * Description: Converts a duty cycle percentage to a 15-bit signed integer for CAN transmission.
  56:src/hybrid_mode.c ****  * Parameters:
  57:src/hybrid_mode.c ****  *   - duty_cycle_percentage: Desired motor duty (in percent, −100 to 100).
  58:src/hybrid_mode.c ****  * Returns:
  59:src/hybrid_mode.c ****  *   - 15-bit signed value scaled to match ESC input format.
  60:src/hybrid_mode.c ****  */
  61:src/hybrid_mode.c **** int16_t Map_Duty_Cycle(int8_t duty_cycle_percentage)
  62:src/hybrid_mode.c **** {
  94              		.loc 1 62 0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 8
  97              		@ frame_needed = 1, uses_anonymous_args = 0
  98              		@ link register save eliminated.
  99 0000 80B4     		push	{r7}
 100              		.cfi_def_cfa_offset 4
 101              		.cfi_offset 7, -4
 102 0002 83B0     		sub	sp, sp, #12
 103              		.cfi_def_cfa_offset 16
 104 0004 00AF     		add	r7, sp, #0
 105              		.cfi_def_cfa_register 7
 106 0006 0346     		mov	r3, r0
 107 0008 FB71     		strb	r3, [r7, #7]
  63:src/hybrid_mode.c ****     return (int16_t)((duty_cycle_percentage * MAX_VALUE_15BIT) / 100);
 108              		.loc 1 63 0
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 4


 109 000a 97F90720 		ldrsb	r2, [r7, #7]
 110 000e 1346     		mov	r3, r2
 111 0010 DB03     		lsls	r3, r3, #15
 112 0012 9B1A     		subs	r3, r3, r2
 113 0014 044A     		ldr	r2, .L8
 114 0016 A2FB0323 		umull	r2, r3, r2, r3
 115 001a 5B09     		lsrs	r3, r3, #5
 116 001c 1BB2     		sxth	r3, r3
  64:src/hybrid_mode.c **** }
 117              		.loc 1 64 0
 118 001e 1846     		mov	r0, r3
 119 0020 0C37     		adds	r7, r7, #12
 120              		.cfi_def_cfa_offset 4
 121 0022 BD46     		mov	sp, r7
 122              		.cfi_def_cfa_register 13
 123              		@ sp needed
 124 0024 80BC     		pop	{r7}
 125              		.cfi_restore 7
 126              		.cfi_def_cfa_offset 0
 127 0026 7047     		bx	lr
 128              	.L9:
 129              		.align	2
 130              	.L8:
 131 0028 1F85EB51 		.word	1374389535
 132              		.cfi_endproc
 133              	.LFE64:
 134              		.size	Map_Duty_Cycle, .-Map_Duty_Cycle
 135              		.section	.text.Emergency_Stop,"ax",%progbits
 136              		.align	2
 137              		.global	Emergency_Stop
 138              		.thumb
 139              		.thumb_func
 140              		.type	Emergency_Stop, %function
 141              	Emergency_Stop:
 142              	.LFB65:
  65:src/hybrid_mode.c **** 
  66:src/hybrid_mode.c **** /*
  67:src/hybrid_mode.c ****  * Function:    Emergency_Stop
  68:src/hybrid_mode.c ****  * Description: Sets the hybrid mode to freewheel, then disables the AIR.
  69:src/hybrid_mode.c ****  */
  70:src/hybrid_mode.c **** void Emergency_Stop()
  71:src/hybrid_mode.c **** {
 143              		.loc 1 71 0
 144              		.cfi_startproc
 145              		@ args = 0, pretend = 0, frame = 0
 146              		@ frame_needed = 1, uses_anonymous_args = 0
 147 0000 80B5     		push	{r7, lr}
 148              		.cfi_def_cfa_offset 8
 149              		.cfi_offset 7, -8
 150              		.cfi_offset 14, -4
 151 0002 00AF     		add	r7, sp, #0
 152              		.cfi_def_cfa_register 7
  72:src/hybrid_mode.c ****     Set_Strategy(FREEWHEEL_S); /* Set the ESC to freewheel before power off */
 153              		.loc 1 72 0
 154 0004 0020     		movs	r0, #0
 155 0006 FFF7FEFF 		bl	Set_Strategy
  73:src/hybrid_mode.c ****     CyDelay(500u); /* Wait 500 ms for the motor to slow down */
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 5


 156              		.loc 1 73 0
 157 000a 4FF4FA70 		mov	r0, #500
 158 000e FFF7FEFF 		bl	CyDelay
  74:src/hybrid_mode.c ****     AIR_enable_Write(STD_OFF); /* Disable the AIR */
 159              		.loc 1 74 0
 160 0012 0020     		movs	r0, #0
 161 0014 FFF7FEFF 		bl	AIR_enable_Write
  75:src/hybrid_mode.c **** }
 162              		.loc 1 75 0
 163 0018 00BF     		nop
 164 001a 80BD     		pop	{r7, pc}
 165              		.cfi_endproc
 166              	.LFE65:
 167              		.size	Emergency_Stop, .-Emergency_Stop
 168              		.section	.text.Set_Strategy,"ax",%progbits
 169              		.align	2
 170              		.global	Set_Strategy
 171              		.thumb
 172              		.thumb_func
 173              		.type	Set_Strategy, %function
 174              	Set_Strategy:
 175              	.LFB66:
  76:src/hybrid_mode.c **** 
  77:src/hybrid_mode.c **** /*
  78:src/hybrid_mode.c ****  * Function:    Set_Strategy
  79:src/hybrid_mode.c ****  * Description: Applies the appropriate hybrid driving strategy based on selector input,
  80:src/hybrid_mode.c ****  *              vehicle state, and driver override.
  81:src/hybrid_mode.c ****  *
  82:src/hybrid_mode.c ****  * Parameters:
  83:src/hybrid_mode.c ****  *   - sel_strategy: User-selected strategy index [1–6].
  84:src/hybrid_mode.c ****  *
  85:src/hybrid_mode.c ****  * Logic:
  86:src/hybrid_mode.c ****  *   - If gear is neutral or speed is too low/high -> Freewheel.
  87:src/hybrid_mode.c ****  *   - If boost button is pressed, brake is not, and sel_strategy > 0 -> Full torque (also when spe
  88:src/hybrid_mode.c ****  *   - Otherwise, applies strategy based on sel_strategy.
  89:src/hybrid_mode.c ****  *   - Defaults to Freewheel if sel_strategy is invalid.
  90:src/hybrid_mode.c ****  *
  91:src/hybrid_mode.c ****  * Sends the selected driving mode and duty cycle to the ESC via CAN.
  92:src/hybrid_mode.c ****  */
  93:src/hybrid_mode.c **** void Set_Strategy(uint8_t sel_strategy)
  94:src/hybrid_mode.c **** {
 176              		.loc 1 94 0
 177              		.cfi_startproc
 178              		@ args = 0, pretend = 0, frame = 8
 179              		@ frame_needed = 1, uses_anonymous_args = 0
 180 0000 80B5     		push	{r7, lr}
 181              		.cfi_def_cfa_offset 8
 182              		.cfi_offset 7, -8
 183              		.cfi_offset 14, -4
 184 0002 82B0     		sub	sp, sp, #8
 185              		.cfi_def_cfa_offset 16
 186 0004 00AF     		add	r7, sp, #0
 187              		.cfi_def_cfa_register 7
 188 0006 0346     		mov	r3, r0
 189 0008 FB71     		strb	r3, [r7, #7]
  95:src/hybrid_mode.c ****     if (car_state.gear == NEUTRAL_GEAR || car_state.vss > MAX_VSS_TO_DEPLOY)
 190              		.loc 1 95 0
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 6


 191 000a 304B     		ldr	r3, .L25
 192 000c DB78     		ldrb	r3, [r3, #3]
 193 000e DBB2     		uxtb	r3, r3
 194 0010 002B     		cmp	r3, #0
 195 0012 04D0     		beq	.L12
 196              		.loc 1 95 0 is_stmt 0 discriminator 1
 197 0014 2D4B     		ldr	r3, .L25
 198 0016 5B79     		ldrb	r3, [r3, #5]
 199 0018 DBB2     		uxtb	r3, r3
 200 001a 5A2B     		cmp	r3, #90
 201 001c 02D9     		bls	.L13
 202              	.L12:
  96:src/hybrid_mode.c ****     {
  97:src/hybrid_mode.c ****         Set_Strategy_Freewheel();
 203              		.loc 1 97 0 is_stmt 1
 204 001e FFF7FEFF 		bl	Set_Strategy_Freewheel
 205 0022 45E0     		b	.L14
 206              	.L13:
  98:src/hybrid_mode.c ****     }
  99:src/hybrid_mode.c ****     else if (car_state.vss < MIN_VSS_TO_DEPLOY && sel_strategy != MANUAL_S)
 207              		.loc 1 99 0
 208 0024 294B     		ldr	r3, .L25
 209 0026 5B79     		ldrb	r3, [r3, #5]
 210 0028 DBB2     		uxtb	r3, r3
 211 002a 022B     		cmp	r3, #2
 212 002c 05D8     		bhi	.L15
 213              		.loc 1 99 0 is_stmt 0 discriminator 1
 214 002e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 215 0030 012B     		cmp	r3, #1
 216 0032 02D0     		beq	.L15
 100:src/hybrid_mode.c ****     {
 101:src/hybrid_mode.c ****         Set_Strategy_Freewheel();
 217              		.loc 1 101 0 is_stmt 1
 218 0034 FFF7FEFF 		bl	Set_Strategy_Freewheel
 219 0038 3AE0     		b	.L14
 220              	.L15:
 102:src/hybrid_mode.c ****     }
 103:src/hybrid_mode.c ****     else if ((Read_Boost_Button() == STD_ON) && (car_state.brake_state == STD_OFF) && (sel_strategy
 221              		.loc 1 103 0
 222 003a FFF7FEFF 		bl	Read_Boost_Button
 223 003e 0346     		mov	r3, r0
 224 0040 012B     		cmp	r3, #1
 225 0042 0ED1     		bne	.L16
 226              		.loc 1 103 0 is_stmt 0 discriminator 1
 227 0044 214B     		ldr	r3, .L25
 228 0046 9B79     		ldrb	r3, [r3, #6]
 229 0048 DBB2     		uxtb	r3, r3
 230 004a 002B     		cmp	r3, #0
 231 004c 09D1     		bne	.L16
 232              		.loc 1 103 0 discriminator 2
 233 004e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 234 0050 002B     		cmp	r3, #0
 235 0052 06D0     		beq	.L16
 104:src/hybrid_mode.c ****     {
 105:src/hybrid_mode.c ****         hybrid_state.driving_mode = TORQUE_MODE;
 236              		.loc 1 105 0 is_stmt 1
 237 0054 1E4B     		ldr	r3, .L25+4
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 7


 238 0056 0222     		movs	r2, #2
 239 0058 1A70     		strb	r2, [r3]
 106:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = BOOST_TORQUE_PERCENTAGE;
 240              		.loc 1 106 0
 241 005a 1D4B     		ldr	r3, .L25+4
 242 005c 6422     		movs	r2, #100
 243 005e 5A70     		strb	r2, [r3, #1]
 244 0060 26E0     		b	.L14
 245              	.L16:
 107:src/hybrid_mode.c ****     }
 108:src/hybrid_mode.c ****     else
 109:src/hybrid_mode.c ****     {
 110:src/hybrid_mode.c ****         switch (sel_strategy)
 246              		.loc 1 110 0
 247 0062 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 248 0064 052B     		cmp	r3, #5
 249 0066 21D8     		bhi	.L17
 250 0068 01A2     		adr	r2, .L19
 251 006a 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 252 006e 00BF     		.p2align 2
 253              	.L19:
 254 0070 89000000 		.word	.L18+1
 255 0074 8F000000 		.word	.L20+1
 256 0078 95000000 		.word	.L21+1
 257 007c 9B000000 		.word	.L22+1
 258 0080 A1000000 		.word	.L23+1
 259 0084 A7000000 		.word	.L24+1
 260              		.p2align 1
 261              	.L18:
 111:src/hybrid_mode.c ****         {
 112:src/hybrid_mode.c ****             case FREEWHEEL_S:
 113:src/hybrid_mode.c ****                 Set_Strategy_Freewheel();
 262              		.loc 1 113 0
 263 0088 FFF7FEFF 		bl	Set_Strategy_Freewheel
 114:src/hybrid_mode.c ****                 break;
 264              		.loc 1 114 0
 265 008c 10E0     		b	.L14
 266              	.L20:
 115:src/hybrid_mode.c ****                 
 116:src/hybrid_mode.c ****             case MANUAL_S:
 117:src/hybrid_mode.c ****                 Set_Strategy_Manual();
 267              		.loc 1 117 0
 268 008e FFF7FEFF 		bl	Set_Strategy_Manual
 118:src/hybrid_mode.c ****                 break;
 269              		.loc 1 118 0
 270 0092 0DE0     		b	.L14
 271              	.L21:
 119:src/hybrid_mode.c **** 
 120:src/hybrid_mode.c ****             case LAUNCH_S:
 121:src/hybrid_mode.c ****                 Set_Strategy_Launch_Assist();
 272              		.loc 1 121 0
 273 0094 FFF7FEFF 		bl	Set_Strategy_Launch_Assist
 122:src/hybrid_mode.c ****                 break;
 274              		.loc 1 122 0
 275 0098 0AE0     		b	.L14
 276              	.L22:
 123:src/hybrid_mode.c **** 
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 8


 124:src/hybrid_mode.c ****             case AUTO_NOREGEN_S:
 125:src/hybrid_mode.c ****                 Set_Strategy_Auto_No_Regen();
 277              		.loc 1 125 0
 278 009a FFF7FEFF 		bl	Set_Strategy_Auto_No_Regen
 126:src/hybrid_mode.c ****                 break;
 279              		.loc 1 126 0
 280 009e 07E0     		b	.L14
 281              	.L23:
 127:src/hybrid_mode.c **** 
 128:src/hybrid_mode.c ****             case AUTO_BRAKEREGEN_S:
 129:src/hybrid_mode.c ****                 Set_Strategy_Auto_Brake_Regen();
 282              		.loc 1 129 0
 283 00a0 FFF7FEFF 		bl	Set_Strategy_Auto_Brake_Regen
 130:src/hybrid_mode.c ****                 break;
 284              		.loc 1 130 0
 285 00a4 04E0     		b	.L14
 286              	.L24:
 131:src/hybrid_mode.c **** 
 132:src/hybrid_mode.c ****             case AUTO_ALLREGEN_S:
 133:src/hybrid_mode.c ****                 Set_Strategy_Auto_Always_Regen();
 287              		.loc 1 133 0
 288 00a6 FFF7FEFF 		bl	Set_Strategy_Auto_Always_Regen
 134:src/hybrid_mode.c ****                 break;
 289              		.loc 1 134 0
 290 00aa 01E0     		b	.L14
 291              	.L17:
 135:src/hybrid_mode.c **** 
 136:src/hybrid_mode.c ****             default:
 137:src/hybrid_mode.c ****                 Set_Strategy_Freewheel();
 292              		.loc 1 137 0
 293 00ac FFF7FEFF 		bl	Set_Strategy_Freewheel
 294              	.L14:
 138:src/hybrid_mode.c ****         }
 139:src/hybrid_mode.c ****     }
 140:src/hybrid_mode.c ****     
 141:src/hybrid_mode.c ****     CAN_Transmit_To_ESC(hybrid_state.driving_mode, hybrid_state.duty_cycle_percentage);
 295              		.loc 1 141 0
 296 00b0 074B     		ldr	r3, .L25+4
 297 00b2 1B78     		ldrb	r3, [r3]
 298 00b4 DAB2     		uxtb	r2, r3
 299 00b6 064B     		ldr	r3, .L25+4
 300 00b8 5B78     		ldrb	r3, [r3, #1]
 301 00ba 5BB2     		sxtb	r3, r3
 302 00bc 1946     		mov	r1, r3
 303 00be 1046     		mov	r0, r2
 304 00c0 FFF7FEFF 		bl	CAN_Transmit_To_ESC
 142:src/hybrid_mode.c **** }
 305              		.loc 1 142 0
 306 00c4 00BF     		nop
 307 00c6 0837     		adds	r7, r7, #8
 308              		.cfi_def_cfa_offset 8
 309 00c8 BD46     		mov	sp, r7
 310              		.cfi_def_cfa_register 13
 311              		@ sp needed
 312 00ca 80BD     		pop	{r7, pc}
 313              	.L26:
 314              		.align	2
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 9


 315              	.L25:
 316 00cc 00000000 		.word	car_state
 317 00d0 00000000 		.word	hybrid_state
 318              		.cfi_endproc
 319              	.LFE66:
 320              		.size	Set_Strategy, .-Set_Strategy
 321              		.section	.text.Set_Strategy_Freewheel,"ax",%progbits
 322              		.align	2
 323              		.global	Set_Strategy_Freewheel
 324              		.thumb
 325              		.thumb_func
 326              		.type	Set_Strategy_Freewheel, %function
 327              	Set_Strategy_Freewheel:
 328              	.LFB67:
 143:src/hybrid_mode.c **** 
 144:src/hybrid_mode.c **** /*
 145:src/hybrid_mode.c ****  * Function:    Set_Strategy_Freewheel
 146:src/hybrid_mode.c ****  * Description: Disables hybrid power by setting mode to Freewheel and zero duty cycle.
 147:src/hybrid_mode.c ****  */
 148:src/hybrid_mode.c **** void Set_Strategy_Freewheel()
 149:src/hybrid_mode.c **** {
 329              		.loc 1 149 0
 330              		.cfi_startproc
 331              		@ args = 0, pretend = 0, frame = 0
 332              		@ frame_needed = 1, uses_anonymous_args = 0
 333              		@ link register save eliminated.
 334 0000 80B4     		push	{r7}
 335              		.cfi_def_cfa_offset 4
 336              		.cfi_offset 7, -4
 337 0002 00AF     		add	r7, sp, #0
 338              		.cfi_def_cfa_register 7
 150:src/hybrid_mode.c ****     hybrid_state.driving_mode = FREEWHEEL_MODE;
 339              		.loc 1 150 0
 340 0004 044B     		ldr	r3, .L28
 341 0006 0022     		movs	r2, #0
 342 0008 1A70     		strb	r2, [r3]
 151:src/hybrid_mode.c ****     hybrid_state.duty_cycle_percentage = STD_OFF;
 343              		.loc 1 151 0
 344 000a 034B     		ldr	r3, .L28
 345 000c 0022     		movs	r2, #0
 346 000e 5A70     		strb	r2, [r3, #1]
 152:src/hybrid_mode.c **** }
 347              		.loc 1 152 0
 348 0010 00BF     		nop
 349 0012 BD46     		mov	sp, r7
 350              		.cfi_def_cfa_register 13
 351              		@ sp needed
 352 0014 80BC     		pop	{r7}
 353              		.cfi_restore 7
 354              		.cfi_def_cfa_offset 0
 355 0016 7047     		bx	lr
 356              	.L29:
 357              		.align	2
 358              	.L28:
 359 0018 00000000 		.word	hybrid_state
 360              		.cfi_endproc
 361              	.LFE67:
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 10


 362              		.size	Set_Strategy_Freewheel, .-Set_Strategy_Freewheel
 363              		.section	.text.Set_Strategy_Manual,"ax",%progbits
 364              		.align	2
 365              		.global	Set_Strategy_Manual
 366              		.thumb
 367              		.thumb_func
 368              		.type	Set_Strategy_Manual, %function
 369              	Set_Strategy_Manual:
 370              	.LFB68:
 153:src/hybrid_mode.c **** 
 154:src/hybrid_mode.c **** /*
 155:src/hybrid_mode.c ****  * Function:    Set_Strategy_Manual
 156:src/hybrid_mode.c ****  * Description: Enables full power (boost mode) if the boost button is pressed and the brake is not
 157:src/hybrid_mode.c ****  *              Falls back to Freewheel otherwise.
 158:src/hybrid_mode.c ****  */
 159:src/hybrid_mode.c **** void Set_Strategy_Manual()
 160:src/hybrid_mode.c **** {
 371              		.loc 1 160 0
 372              		.cfi_startproc
 373              		@ args = 0, pretend = 0, frame = 0
 374              		@ frame_needed = 1, uses_anonymous_args = 0
 375 0000 80B5     		push	{r7, lr}
 376              		.cfi_def_cfa_offset 8
 377              		.cfi_offset 7, -8
 378              		.cfi_offset 14, -4
 379 0002 00AF     		add	r7, sp, #0
 380              		.cfi_def_cfa_register 7
 161:src/hybrid_mode.c ****     /* The logic for the boost button is in the main Set_Strategy() function;
 162:src/hybrid_mode.c ****      * If the program enters here it means the selector is on manual,
 163:src/hybrid_mode.c ****      * but boost button is not pressed -> freewheel */
 164:src/hybrid_mode.c ****     Set_Strategy_Freewheel();
 381              		.loc 1 164 0
 382 0004 FFF7FEFF 		bl	Set_Strategy_Freewheel
 165:src/hybrid_mode.c **** }
 383              		.loc 1 165 0
 384 0008 00BF     		nop
 385 000a 80BD     		pop	{r7, pc}
 386              		.cfi_endproc
 387              	.LFE68:
 388              		.size	Set_Strategy_Manual, .-Set_Strategy_Manual
 389              		.section	.text.Set_Strategy_Launch_Assist,"ax",%progbits
 390              		.align	2
 391              		.global	Set_Strategy_Launch_Assist
 392              		.thumb
 393              		.thumb_func
 394              		.type	Set_Strategy_Launch_Assist, %function
 395              	Set_Strategy_Launch_Assist:
 396              	.LFB69:
 166:src/hybrid_mode.c **** 
 167:src/hybrid_mode.c **** /*
 168:src/hybrid_mode.c ****  * Function:    Set_Strategy_Launch_Assist
 169:src/hybrid_mode.c ****  * Description: Engages full torque at launch under these conditions:
 170:src/hybrid_mode.c ****  *              - RPM and VSS under a set threshold
 171:src/hybrid_mode.c ****  *              - TPS over a set threshold
 172:src/hybrid_mode.c ****  *              - Gear = 1
 173:src/hybrid_mode.c ****  *              - Brake not pressed
 174:src/hybrid_mode.c ****  *              Falls back to Freewheel otherwise.
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 11


 175:src/hybrid_mode.c ****  */
 176:src/hybrid_mode.c **** void Set_Strategy_Launch_Assist()
 177:src/hybrid_mode.c **** {
 397              		.loc 1 177 0
 398              		.cfi_startproc
 399              		@ args = 0, pretend = 0, frame = 0
 400              		@ frame_needed = 1, uses_anonymous_args = 0
 401 0000 80B5     		push	{r7, lr}
 402              		.cfi_def_cfa_offset 8
 403              		.cfi_offset 7, -8
 404              		.cfi_offset 14, -4
 405 0002 00AF     		add	r7, sp, #0
 406              		.cfi_def_cfa_register 7
 178:src/hybrid_mode.c ****     if ((car_state.rpm <= LAUNCH_MAX_RPM) && (car_state.vss <= LAUNCH_MAX_VSS) && (car_state.tps >=
 407              		.loc 1 178 0
 408 0004 124B     		ldr	r3, .L34
 409 0006 1B88     		ldrh	r3, [r3]	@ movhi
 410 0008 9BB2     		uxth	r3, r3
 411 000a 41F64C52 		movw	r2, #7500
 412 000e 9342     		cmp	r3, r2
 413 0010 1AD8     		bhi	.L32
 414              		.loc 1 178 0 is_stmt 0 discriminator 1
 415 0012 0F4B     		ldr	r3, .L34
 416 0014 5B79     		ldrb	r3, [r3, #5]
 417 0016 DBB2     		uxtb	r3, r3
 418 0018 2D2B     		cmp	r3, #45
 419 001a 15D8     		bhi	.L32
 420              		.loc 1 178 0 discriminator 2
 421 001c 0C4B     		ldr	r3, .L34
 422 001e 1B79     		ldrb	r3, [r3, #4]
 423 0020 DBB2     		uxtb	r3, r3
 424 0022 4F2B     		cmp	r3, #79
 425 0024 10D9     		bls	.L32
 179:src/hybrid_mode.c ****         && (car_state.gear == 1) && (car_state.brake_state == STD_OFF))
 426              		.loc 1 179 0 is_stmt 1
 427 0026 0A4B     		ldr	r3, .L34
 428 0028 DB78     		ldrb	r3, [r3, #3]
 429 002a DBB2     		uxtb	r3, r3
 430 002c 012B     		cmp	r3, #1
 431 002e 0BD1     		bne	.L32
 432              		.loc 1 179 0 is_stmt 0 discriminator 1
 433 0030 074B     		ldr	r3, .L34
 434 0032 9B79     		ldrb	r3, [r3, #6]
 435 0034 DBB2     		uxtb	r3, r3
 436 0036 002B     		cmp	r3, #0
 437 0038 06D1     		bne	.L32
 180:src/hybrid_mode.c ****     {
 181:src/hybrid_mode.c ****         hybrid_state.driving_mode = TORQUE_MODE;
 438              		.loc 1 181 0 is_stmt 1
 439 003a 064B     		ldr	r3, .L34+4
 440 003c 0222     		movs	r2, #2
 441 003e 1A70     		strb	r2, [r3]
 182:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = LAUNCH_TORQUE_PERCENTAGE;
 442              		.loc 1 182 0
 443 0040 044B     		ldr	r3, .L34+4
 444 0042 6422     		movs	r2, #100
 445 0044 5A70     		strb	r2, [r3, #1]
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 12


 446 0046 01E0     		b	.L33
 447              	.L32:
 183:src/hybrid_mode.c ****     }
 184:src/hybrid_mode.c ****     else
 185:src/hybrid_mode.c ****         Set_Strategy_Freewheel();
 448              		.loc 1 185 0
 449 0048 FFF7FEFF 		bl	Set_Strategy_Freewheel
 450              	.L33:
 186:src/hybrid_mode.c **** }
 451              		.loc 1 186 0
 452 004c 00BF     		nop
 453 004e 80BD     		pop	{r7, pc}
 454              	.L35:
 455              		.align	2
 456              	.L34:
 457 0050 00000000 		.word	car_state
 458 0054 00000000 		.word	hybrid_state
 459              		.cfi_endproc
 460              	.LFE69:
 461              		.size	Set_Strategy_Launch_Assist, .-Set_Strategy_Launch_Assist
 462              		.section	.text.Set_Strategy_Auto_No_Regen,"ax",%progbits
 463              		.align	2
 464              		.global	Set_Strategy_Auto_No_Regen
 465              		.thumb
 466              		.thumb_func
 467              		.type	Set_Strategy_Auto_No_Regen, %function
 468              	Set_Strategy_Auto_No_Regen:
 469              	.LFB70:
 187:src/hybrid_mode.c **** 
 188:src/hybrid_mode.c **** /*
 189:src/hybrid_mode.c ****  * Function:    Set_Strategy_Auto_No_Regen
 190:src/hybrid_mode.c ****  * Description: Applies torque proportional to TPS when brake is not pressed.
 191:src/hybrid_mode.c ****  *              Falls back to Freewheel if brake is active.
 192:src/hybrid_mode.c ****  */
 193:src/hybrid_mode.c **** void Set_Strategy_Auto_No_Regen()
 194:src/hybrid_mode.c **** {
 470              		.loc 1 194 0
 471              		.cfi_startproc
 472              		@ args = 0, pretend = 0, frame = 0
 473              		@ frame_needed = 1, uses_anonymous_args = 0
 474 0000 80B5     		push	{r7, lr}
 475              		.cfi_def_cfa_offset 8
 476              		.cfi_offset 7, -8
 477              		.cfi_offset 14, -4
 478 0002 00AF     		add	r7, sp, #0
 479              		.cfi_def_cfa_register 7
 195:src/hybrid_mode.c ****     if (car_state.brake_state == STD_OFF)
 480              		.loc 1 195 0
 481 0004 114B     		ldr	r3, .L42
 482 0006 9B79     		ldrb	r3, [r3, #6]
 483 0008 DBB2     		uxtb	r3, r3
 484 000a 002B     		cmp	r3, #0
 485 000c 19D1     		bne	.L37
 196:src/hybrid_mode.c ****     {        
 197:src/hybrid_mode.c ****         if (car_state.tps < MAPPING_TPS_THRESHOLD)
 486              		.loc 1 197 0
 487 000e 0F4B     		ldr	r3, .L42
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 13


 488 0010 1B79     		ldrb	r3, [r3, #4]
 489 0012 DBB2     		uxtb	r3, r3
 490 0014 312B     		cmp	r3, #49
 491 0016 06D8     		bhi	.L38
 198:src/hybrid_mode.c ****         {
 199:src/hybrid_mode.c ****             hybrid_state.driving_mode = FREEWHEEL_MODE;
 492              		.loc 1 199 0
 493 0018 0D4B     		ldr	r3, .L42+4
 494 001a 0022     		movs	r2, #0
 495 001c 1A70     		strb	r2, [r3]
 200:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = STD_OFF;
 496              		.loc 1 200 0
 497 001e 0C4B     		ldr	r3, .L42+4
 498 0020 0022     		movs	r2, #0
 499 0022 5A70     		strb	r2, [r3, #1]
 201:src/hybrid_mode.c ****         }
 202:src/hybrid_mode.c ****         else
 203:src/hybrid_mode.c ****         {
 204:src/hybrid_mode.c ****             hybrid_state.driving_mode = TORQUE_MODE;
 205:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = TPS_to_Duty_Cycle_Percentage(car_state.tps);
 206:src/hybrid_mode.c ****         }
 207:src/hybrid_mode.c ****     }
 208:src/hybrid_mode.c ****     else
 209:src/hybrid_mode.c ****         Set_Strategy_Freewheel();
 210:src/hybrid_mode.c **** }
 500              		.loc 1 210 0
 501 0024 0FE0     		b	.L41
 502              	.L38:
 204:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = TPS_to_Duty_Cycle_Percentage(car_state.tps);
 503              		.loc 1 204 0
 504 0026 0A4B     		ldr	r3, .L42+4
 505 0028 0222     		movs	r2, #2
 506 002a 1A70     		strb	r2, [r3]
 205:src/hybrid_mode.c ****         }
 507              		.loc 1 205 0
 508 002c 074B     		ldr	r3, .L42
 509 002e 1B79     		ldrb	r3, [r3, #4]
 510 0030 DBB2     		uxtb	r3, r3
 511 0032 1846     		mov	r0, r3
 512 0034 FFF7FEFF 		bl	TPS_to_Duty_Cycle_Percentage
 513 0038 0346     		mov	r3, r0
 514 003a 5AB2     		sxtb	r2, r3
 515 003c 044B     		ldr	r3, .L42+4
 516 003e 5A70     		strb	r2, [r3, #1]
 517              		.loc 1 210 0
 518 0040 01E0     		b	.L41
 519              	.L37:
 209:src/hybrid_mode.c **** }
 520              		.loc 1 209 0
 521 0042 FFF7FEFF 		bl	Set_Strategy_Freewheel
 522              	.L41:
 523              		.loc 1 210 0
 524 0046 00BF     		nop
 525 0048 80BD     		pop	{r7, pc}
 526              	.L43:
 527 004a 00BF     		.align	2
 528              	.L42:
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 14


 529 004c 00000000 		.word	car_state
 530 0050 00000000 		.word	hybrid_state
 531              		.cfi_endproc
 532              	.LFE70:
 533              		.size	Set_Strategy_Auto_No_Regen, .-Set_Strategy_Auto_No_Regen
 534              		.section	.text.Set_Strategy_Auto_Brake_Regen,"ax",%progbits
 535              		.align	2
 536              		.global	Set_Strategy_Auto_Brake_Regen
 537              		.thumb
 538              		.thumb_func
 539              		.type	Set_Strategy_Auto_Brake_Regen, %function
 540              	Set_Strategy_Auto_Brake_Regen:
 541              	.LFB71:
 211:src/hybrid_mode.c **** 
 212:src/hybrid_mode.c **** /*
 213:src/hybrid_mode.c ****  * Function:    Set_Strategy_Auto_Brake_Regen
 214:src/hybrid_mode.c ****  * Description: Applies torque proportional to TPS when brake is not pressed.
 215:src/hybrid_mode.c ****  *              Switches to full regenerative braking (BRAKE mode) when brake is pressed.
 216:src/hybrid_mode.c ****  */
 217:src/hybrid_mode.c **** void Set_Strategy_Auto_Brake_Regen()
 218:src/hybrid_mode.c **** {
 542              		.loc 1 218 0
 543              		.cfi_startproc
 544              		@ args = 0, pretend = 0, frame = 0
 545              		@ frame_needed = 1, uses_anonymous_args = 0
 546 0000 80B5     		push	{r7, lr}
 547              		.cfi_def_cfa_offset 8
 548              		.cfi_offset 7, -8
 549              		.cfi_offset 14, -4
 550 0002 00AF     		add	r7, sp, #0
 551              		.cfi_def_cfa_register 7
 219:src/hybrid_mode.c ****     if (car_state.brake_state == STD_OFF)
 552              		.loc 1 219 0
 553 0004 134B     		ldr	r3, .L50
 554 0006 9B79     		ldrb	r3, [r3, #6]
 555 0008 DBB2     		uxtb	r3, r3
 556 000a 002B     		cmp	r3, #0
 557 000c 19D1     		bne	.L45
 220:src/hybrid_mode.c ****     {
 221:src/hybrid_mode.c ****         if (car_state.tps < MAPPING_TPS_THRESHOLD)
 558              		.loc 1 221 0
 559 000e 114B     		ldr	r3, .L50
 560 0010 1B79     		ldrb	r3, [r3, #4]
 561 0012 DBB2     		uxtb	r3, r3
 562 0014 312B     		cmp	r3, #49
 563 0016 06D8     		bhi	.L46
 222:src/hybrid_mode.c ****         {
 223:src/hybrid_mode.c ****             hybrid_state.driving_mode = FREEWHEEL_MODE;
 564              		.loc 1 223 0
 565 0018 0F4B     		ldr	r3, .L50+4
 566 001a 0022     		movs	r2, #0
 567 001c 1A70     		strb	r2, [r3]
 224:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = STD_OFF;
 568              		.loc 1 224 0
 569 001e 0E4B     		ldr	r3, .L50+4
 570 0020 0022     		movs	r2, #0
 571 0022 5A70     		strb	r2, [r3, #1]
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 15


 225:src/hybrid_mode.c ****         }
 226:src/hybrid_mode.c ****         else
 227:src/hybrid_mode.c ****         {
 228:src/hybrid_mode.c ****             hybrid_state.driving_mode = TORQUE_MODE;
 229:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = TPS_to_Duty_Cycle_Percentage(car_state.tps);
 230:src/hybrid_mode.c ****         }
 231:src/hybrid_mode.c ****     }
 232:src/hybrid_mode.c ****     else /* Braking */
 233:src/hybrid_mode.c ****     {
 234:src/hybrid_mode.c ****         hybrid_state.driving_mode = BRAKE_MODE;
 235:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = BRAKE_REGEN_INTENSITY_PERCENTAGE;
 236:src/hybrid_mode.c ****     }
 237:src/hybrid_mode.c **** }
 572              		.loc 1 237 0
 573 0024 13E0     		b	.L49
 574              	.L46:
 228:src/hybrid_mode.c ****             hybrid_state.duty_cycle_percentage = TPS_to_Duty_Cycle_Percentage(car_state.tps);
 575              		.loc 1 228 0
 576 0026 0C4B     		ldr	r3, .L50+4
 577 0028 0222     		movs	r2, #2
 578 002a 1A70     		strb	r2, [r3]
 229:src/hybrid_mode.c ****         }
 579              		.loc 1 229 0
 580 002c 094B     		ldr	r3, .L50
 581 002e 1B79     		ldrb	r3, [r3, #4]
 582 0030 DBB2     		uxtb	r3, r3
 583 0032 1846     		mov	r0, r3
 584 0034 FFF7FEFF 		bl	TPS_to_Duty_Cycle_Percentage
 585 0038 0346     		mov	r3, r0
 586 003a 5AB2     		sxtb	r2, r3
 587 003c 064B     		ldr	r3, .L50+4
 588 003e 5A70     		strb	r2, [r3, #1]
 589              		.loc 1 237 0
 590 0040 05E0     		b	.L49
 591              	.L45:
 234:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = BRAKE_REGEN_INTENSITY_PERCENTAGE;
 592              		.loc 1 234 0
 593 0042 054B     		ldr	r3, .L50+4
 594 0044 0822     		movs	r2, #8
 595 0046 1A70     		strb	r2, [r3]
 235:src/hybrid_mode.c ****     }
 596              		.loc 1 235 0
 597 0048 034B     		ldr	r3, .L50+4
 598 004a 6422     		movs	r2, #100
 599 004c 5A70     		strb	r2, [r3, #1]
 600              	.L49:
 601              		.loc 1 237 0
 602 004e 00BF     		nop
 603 0050 80BD     		pop	{r7, pc}
 604              	.L51:
 605 0052 00BF     		.align	2
 606              	.L50:
 607 0054 00000000 		.word	car_state
 608 0058 00000000 		.word	hybrid_state
 609              		.cfi_endproc
 610              	.LFE71:
 611              		.size	Set_Strategy_Auto_Brake_Regen, .-Set_Strategy_Auto_Brake_Regen
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 16


 612              		.section	.text.Set_Strategy_Auto_Always_Regen,"ax",%progbits
 613              		.align	2
 614              		.global	Set_Strategy_Auto_Always_Regen
 615              		.thumb
 616              		.thumb_func
 617              		.type	Set_Strategy_Auto_Always_Regen, %function
 618              	Set_Strategy_Auto_Always_Regen:
 619              	.LFB72:
 238:src/hybrid_mode.c **** 
 239:src/hybrid_mode.c **** /*
 240:src/hybrid_mode.c ****  * Function:    Set_Strategy_Auto_Always_Regen
 241:src/hybrid_mode.c ****  * Description: Applies torque proportional to TPS if TPS > 50 and brake is not pressed.
 242:src/hybrid_mode.c ****  *              Regenerative braking otherwise (different intensity for coasting or braking)
 243:src/hybrid_mode.c ****  */
 244:src/hybrid_mode.c **** void Set_Strategy_Auto_Always_Regen()
 245:src/hybrid_mode.c **** {
 620              		.loc 1 245 0
 621              		.cfi_startproc
 622              		@ args = 0, pretend = 0, frame = 0
 623              		@ frame_needed = 1, uses_anonymous_args = 0
 624 0000 80B5     		push	{r7, lr}
 625              		.cfi_def_cfa_offset 8
 626              		.cfi_offset 7, -8
 627              		.cfi_offset 14, -4
 628 0002 00AF     		add	r7, sp, #0
 629              		.cfi_def_cfa_register 7
 246:src/hybrid_mode.c ****     if ((car_state.brake_state == STD_OFF) && (car_state.tps > ALWAYS_REGEN_TPS_THRESHOLD))
 630              		.loc 1 246 0
 631 0004 154B     		ldr	r3, .L57
 632 0006 9B79     		ldrb	r3, [r3, #6]
 633 0008 DBB2     		uxtb	r3, r3
 634 000a 002B     		cmp	r3, #0
 635 000c 12D1     		bne	.L53
 636              		.loc 1 246 0 is_stmt 0 discriminator 1
 637 000e 134B     		ldr	r3, .L57
 638 0010 1B79     		ldrb	r3, [r3, #4]
 639 0012 DBB2     		uxtb	r3, r3
 640 0014 322B     		cmp	r3, #50
 641 0016 0DD9     		bls	.L53
 247:src/hybrid_mode.c ****     {
 248:src/hybrid_mode.c ****         hybrid_state.driving_mode = TORQUE_MODE;
 642              		.loc 1 248 0 is_stmt 1
 643 0018 114B     		ldr	r3, .L57+4
 644 001a 0222     		movs	r2, #2
 645 001c 1A70     		strb	r2, [r3]
 249:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = TPS_to_Duty_Cycle_Percentage(car_state.tps);
 646              		.loc 1 249 0
 647 001e 0F4B     		ldr	r3, .L57
 648 0020 1B79     		ldrb	r3, [r3, #4]
 649 0022 DBB2     		uxtb	r3, r3
 650 0024 1846     		mov	r0, r3
 651 0026 FFF7FEFF 		bl	TPS_to_Duty_Cycle_Percentage
 652 002a 0346     		mov	r3, r0
 653 002c 5AB2     		sxtb	r2, r3
 654 002e 0C4B     		ldr	r3, .L57+4
 655 0030 5A70     		strb	r2, [r3, #1]
 250:src/hybrid_mode.c ****     }
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 17


 251:src/hybrid_mode.c ****     else if (car_state.brake_state == STD_OFF) /* TPS under threshold, brake not pressed */
 252:src/hybrid_mode.c ****     {
 253:src/hybrid_mode.c ****         hybrid_state.driving_mode = BRAKE_MODE;
 254:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = COASTING_REGEN_INTENSITY_PERCENTAGE;
 255:src/hybrid_mode.c ****     }
 256:src/hybrid_mode.c ****     else /* Brake pressed */
 257:src/hybrid_mode.c ****     {
 258:src/hybrid_mode.c ****         hybrid_state.driving_mode = BRAKE_MODE;
 259:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = BRAKE_REGEN_INTENSITY_PERCENTAGE;
 260:src/hybrid_mode.c ****     }
 261:src/hybrid_mode.c **** }
 656              		.loc 1 261 0
 657 0032 11E0     		b	.L56
 658              	.L53:
 251:src/hybrid_mode.c ****     {
 659              		.loc 1 251 0
 660 0034 094B     		ldr	r3, .L57
 661 0036 9B79     		ldrb	r3, [r3, #6]
 662 0038 DBB2     		uxtb	r3, r3
 663 003a 002B     		cmp	r3, #0
 664 003c 06D1     		bne	.L55
 253:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = COASTING_REGEN_INTENSITY_PERCENTAGE;
 665              		.loc 1 253 0
 666 003e 084B     		ldr	r3, .L57+4
 667 0040 0822     		movs	r2, #8
 668 0042 1A70     		strb	r2, [r3]
 254:src/hybrid_mode.c ****     }
 669              		.loc 1 254 0
 670 0044 064B     		ldr	r3, .L57+4
 671 0046 3222     		movs	r2, #50
 672 0048 5A70     		strb	r2, [r3, #1]
 673              		.loc 1 261 0
 674 004a 05E0     		b	.L56
 675              	.L55:
 258:src/hybrid_mode.c ****         hybrid_state.duty_cycle_percentage = BRAKE_REGEN_INTENSITY_PERCENTAGE;
 676              		.loc 1 258 0
 677 004c 044B     		ldr	r3, .L57+4
 678 004e 0822     		movs	r2, #8
 679 0050 1A70     		strb	r2, [r3]
 259:src/hybrid_mode.c ****     }
 680              		.loc 1 259 0
 681 0052 034B     		ldr	r3, .L57+4
 682 0054 6422     		movs	r2, #100
 683 0056 5A70     		strb	r2, [r3, #1]
 684              	.L56:
 685              		.loc 1 261 0
 686 0058 00BF     		nop
 687 005a 80BD     		pop	{r7, pc}
 688              	.L58:
 689              		.align	2
 690              	.L57:
 691 005c 00000000 		.word	car_state
 692 0060 00000000 		.word	hybrid_state
 693              		.cfi_endproc
 694              	.LFE72:
 695              		.size	Set_Strategy_Auto_Always_Regen, .-Set_Strategy_Auto_Always_Regen
 696              		.text
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 18


 697              	.Letext0:
 698              		.file 2 "c:\\program files (x86)\\cypress\\psoc creator\\4.4\\psoc creator\\import\\gnu\\arm\\5.4.
 699              		.file 3 "c:\\program files (x86)\\cypress\\psoc creator\\4.4\\psoc creator\\import\\gnu\\arm\\5.4.
 700              		.file 4 "./include/can_comm.h"
 701              		.file 5 "./include/hybrid_mode.h"
 702              		.file 6 "Generated_Source\\PSoC5/core_cm3.h"
 703              		.section	.debug_info,"",%progbits
 704              	.Ldebug_info0:
 705 0000 A3020000 		.4byte	0x2a3
 706 0004 0400     		.2byte	0x4
 707 0006 00000000 		.4byte	.Ldebug_abbrev0
 708 000a 04       		.byte	0x4
 709 000b 01       		.uleb128 0x1
 710 000c 58000000 		.4byte	.LASF45
 711 0010 0C       		.byte	0xc
 712 0011 1F030000 		.4byte	.LASF46
 713 0015 FA000000 		.4byte	.LASF47
 714 0019 00000000 		.4byte	.Ldebug_ranges0+0
 715 001d 00000000 		.4byte	0
 716 0021 00000000 		.4byte	.Ldebug_line0
 717 0025 02       		.uleb128 0x2
 718 0026 36000000 		.4byte	.LASF0
 719 002a 02       		.byte	0x2
 720 002b 1B       		.byte	0x1b
 721 002c 30000000 		.4byte	0x30
 722 0030 03       		.uleb128 0x3
 723 0031 01       		.byte	0x1
 724 0032 06       		.byte	0x6
 725 0033 8C010000 		.4byte	.LASF2
 726 0037 02       		.uleb128 0x2
 727 0038 3F000000 		.4byte	.LASF1
 728 003c 02       		.byte	0x2
 729 003d 1D       		.byte	0x1d
 730 003e 42000000 		.4byte	0x42
 731 0042 03       		.uleb128 0x3
 732 0043 01       		.byte	0x1
 733 0044 08       		.byte	0x8
 734 0045 A4010000 		.4byte	.LASF3
 735 0049 02       		.uleb128 0x2
 736 004a E6000000 		.4byte	.LASF4
 737 004e 02       		.byte	0x2
 738 004f 29       		.byte	0x29
 739 0050 54000000 		.4byte	0x54
 740 0054 03       		.uleb128 0x3
 741 0055 02       		.byte	0x2
 742 0056 05       		.byte	0x5
 743 0057 15020000 		.4byte	.LASF5
 744 005b 02       		.uleb128 0x2
 745 005c 03020000 		.4byte	.LASF6
 746 0060 02       		.byte	0x2
 747 0061 2B       		.byte	0x2b
 748 0062 66000000 		.4byte	0x66
 749 0066 03       		.uleb128 0x3
 750 0067 02       		.byte	0x2
 751 0068 07       		.byte	0x7
 752 0069 C4010000 		.4byte	.LASF7
 753 006d 02       		.uleb128 0x2
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 19


 754 006e F0000000 		.4byte	.LASF8
 755 0072 02       		.byte	0x2
 756 0073 3F       		.byte	0x3f
 757 0074 78000000 		.4byte	0x78
 758 0078 03       		.uleb128 0x3
 759 0079 04       		.byte	0x4
 760 007a 05       		.byte	0x5
 761 007b 16030000 		.4byte	.LASF9
 762 007f 03       		.uleb128 0x3
 763 0080 04       		.byte	0x4
 764 0081 07       		.byte	0x7
 765 0082 B2010000 		.4byte	.LASF10
 766 0086 03       		.uleb128 0x3
 767 0087 08       		.byte	0x8
 768 0088 05       		.byte	0x5
 769 0089 00000000 		.4byte	.LASF11
 770 008d 03       		.uleb128 0x3
 771 008e 08       		.byte	0x8
 772 008f 07       		.byte	0x7
 773 0090 63020000 		.4byte	.LASF12
 774 0094 04       		.uleb128 0x4
 775 0095 04       		.byte	0x4
 776 0096 05       		.byte	0x5
 777 0097 696E7400 		.ascii	"int\000"
 778 009b 03       		.uleb128 0x3
 779 009c 04       		.byte	0x4
 780 009d 07       		.byte	0x7
 781 009e 2C020000 		.4byte	.LASF13
 782 00a2 02       		.uleb128 0x2
 783 00a3 77010000 		.4byte	.LASF14
 784 00a7 03       		.byte	0x3
 785 00a8 14       		.byte	0x14
 786 00a9 25000000 		.4byte	0x25
 787 00ad 02       		.uleb128 0x2
 788 00ae 7A020000 		.4byte	.LASF15
 789 00b2 03       		.byte	0x3
 790 00b3 18       		.byte	0x18
 791 00b4 37000000 		.4byte	0x37
 792 00b8 02       		.uleb128 0x2
 793 00b9 82020000 		.4byte	.LASF16
 794 00bd 03       		.byte	0x3
 795 00be 20       		.byte	0x20
 796 00bf 49000000 		.4byte	0x49
 797 00c3 02       		.uleb128 0x2
 798 00c4 00030000 		.4byte	.LASF17
 799 00c8 03       		.byte	0x3
 800 00c9 24       		.byte	0x24
 801 00ca 5B000000 		.4byte	0x5b
 802 00ce 02       		.uleb128 0x2
 803 00cf 7E010000 		.4byte	.LASF18
 804 00d3 03       		.byte	0x3
 805 00d4 2C       		.byte	0x2c
 806 00d5 6D000000 		.4byte	0x6d
 807 00d9 03       		.uleb128 0x3
 808 00da 04       		.byte	0x4
 809 00db 04       		.byte	0x4
 810 00dc 86010000 		.4byte	.LASF19
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 20


 811 00e0 03       		.uleb128 0x3
 812 00e1 08       		.byte	0x8
 813 00e2 04       		.byte	0x4
 814 00e3 0E020000 		.4byte	.LASF20
 815 00e7 03       		.uleb128 0x3
 816 00e8 01       		.byte	0x1
 817 00e9 08       		.byte	0x8
 818 00ea EE020000 		.4byte	.LASF21
 819 00ee 03       		.uleb128 0x3
 820 00ef 08       		.byte	0x8
 821 00f0 04       		.byte	0x4
 822 00f1 A7020000 		.4byte	.LASF22
 823 00f5 03       		.uleb128 0x3
 824 00f6 04       		.byte	0x4
 825 00f7 07       		.byte	0x7
 826 00f8 B3020000 		.4byte	.LASF23
 827 00fc 05       		.uleb128 0x5
 828 00fd 08       		.byte	0x8
 829 00fe 04       		.byte	0x4
 830 00ff 23       		.byte	0x23
 831 0100 4D010000 		.4byte	0x14d
 832 0104 06       		.uleb128 0x6
 833 0105 72706D00 		.ascii	"rpm\000"
 834 0109 04       		.byte	0x4
 835 010a 24       		.byte	0x24
 836 010b C3000000 		.4byte	0xc3
 837 010f 00       		.byte	0
 838 0110 07       		.uleb128 0x7
 839 0111 40030000 		.4byte	.LASF24
 840 0115 04       		.byte	0x4
 841 0116 25       		.byte	0x25
 842 0117 AD000000 		.4byte	0xad
 843 011b 02       		.byte	0x2
 844 011c 07       		.uleb128 0x7
 845 011d 72010000 		.4byte	.LASF25
 846 0121 04       		.byte	0x4
 847 0122 26       		.byte	0x26
 848 0123 AD000000 		.4byte	0xad
 849 0127 03       		.byte	0x3
 850 0128 06       		.uleb128 0x6
 851 0129 74707300 		.ascii	"tps\000"
 852 012d 04       		.byte	0x4
 853 012e 27       		.byte	0x27
 854 012f AD000000 		.4byte	0xad
 855 0133 04       		.byte	0x4
 856 0134 06       		.uleb128 0x6
 857 0135 76737300 		.ascii	"vss\000"
 858 0139 04       		.byte	0x4
 859 013a 28       		.byte	0x28
 860 013b AD000000 		.4byte	0xad
 861 013f 05       		.byte	0x5
 862 0140 07       		.uleb128 0x7
 863 0141 98010000 		.4byte	.LASF26
 864 0145 04       		.byte	0x4
 865 0146 29       		.byte	0x29
 866 0147 AD000000 		.4byte	0xad
 867 014b 06       		.byte	0x6
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 21


 868 014c 00       		.byte	0
 869 014d 02       		.uleb128 0x2
 870 014e 4D030000 		.4byte	.LASF27
 871 0152 04       		.byte	0x4
 872 0153 2A       		.byte	0x2a
 873 0154 FC000000 		.4byte	0xfc
 874 0158 05       		.uleb128 0x5
 875 0159 02       		.byte	0x2
 876 015a 05       		.byte	0x5
 877 015b 2F       		.byte	0x2f
 878 015c 79010000 		.4byte	0x179
 879 0160 07       		.uleb128 0x7
 880 0161 F6010000 		.4byte	.LASF28
 881 0165 05       		.byte	0x5
 882 0166 30       		.byte	0x30
 883 0167 AD000000 		.4byte	0xad
 884 016b 00       		.byte	0
 885 016c 07       		.uleb128 0x7
 886 016d 5C010000 		.4byte	.LASF29
 887 0171 05       		.byte	0x5
 888 0172 31       		.byte	0x31
 889 0173 A2000000 		.4byte	0xa2
 890 0177 01       		.byte	0x1
 891 0178 00       		.byte	0
 892 0179 02       		.uleb128 0x2
 893 017a 5E030000 		.4byte	.LASF30
 894 017e 05       		.byte	0x5
 895 017f 32       		.byte	0x32
 896 0180 58010000 		.4byte	0x158
 897 0184 08       		.uleb128 0x8
 898 0185 8A020000 		.4byte	.LASF31
 899 0189 01       		.byte	0x1
 900 018a 2D       		.byte	0x2d
 901 018b AD000000 		.4byte	0xad
 902 018f 00000000 		.4byte	.LFB63
 903 0193 3C000000 		.4byte	.LFE63-.LFB63
 904 0197 01       		.uleb128 0x1
 905 0198 9C       		.byte	0x9c
 906 0199 AC010000 		.4byte	0x1ac
 907 019d 09       		.uleb128 0x9
 908 019e 39020000 		.4byte	.LASF33
 909 01a2 01       		.byte	0x1
 910 01a3 2D       		.byte	0x2d
 911 01a4 AD000000 		.4byte	0xad
 912 01a8 02       		.uleb128 0x2
 913 01a9 91       		.byte	0x91
 914 01aa 77       		.sleb128 -9
 915 01ab 00       		.byte	0
 916 01ac 08       		.uleb128 0x8
 917 01ad 49000000 		.4byte	.LASF32
 918 01b1 01       		.byte	0x1
 919 01b2 3D       		.byte	0x3d
 920 01b3 B8000000 		.4byte	0xb8
 921 01b7 00000000 		.4byte	.LFB64
 922 01bb 2C000000 		.4byte	.LFE64-.LFB64
 923 01bf 01       		.uleb128 0x1
 924 01c0 9C       		.byte	0x9c
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 22


 925 01c1 D4010000 		.4byte	0x1d4
 926 01c5 09       		.uleb128 0x9
 927 01c6 5C010000 		.4byte	.LASF29
 928 01ca 01       		.byte	0x1
 929 01cb 3D       		.byte	0x3d
 930 01cc A2000000 		.4byte	0xa2
 931 01d0 02       		.uleb128 0x2
 932 01d1 91       		.byte	0x91
 933 01d2 77       		.sleb128 -9
 934 01d3 00       		.byte	0
 935 01d4 0A       		.uleb128 0xa
 936 01d5 31030000 		.4byte	.LASF35
 937 01d9 01       		.byte	0x1
 938 01da 46       		.byte	0x46
 939 01db 00000000 		.4byte	.LFB65
 940 01df 1C000000 		.4byte	.LFE65-.LFB65
 941 01e3 01       		.uleb128 0x1
 942 01e4 9C       		.byte	0x9c
 943 01e5 0B       		.uleb128 0xb
 944 01e6 F3020000 		.4byte	.LASF48
 945 01ea 01       		.byte	0x1
 946 01eb 5D       		.byte	0x5d
 947 01ec 00000000 		.4byte	.LFB66
 948 01f0 D4000000 		.4byte	.LFE66-.LFB66
 949 01f4 01       		.uleb128 0x1
 950 01f5 9C       		.byte	0x9c
 951 01f6 09020000 		.4byte	0x209
 952 01fa 09       		.uleb128 0x9
 953 01fb 0E000000 		.4byte	.LASF34
 954 01ff 01       		.byte	0x1
 955 0200 5D       		.byte	0x5d
 956 0201 AD000000 		.4byte	0xad
 957 0205 02       		.uleb128 0x2
 958 0206 91       		.byte	0x91
 959 0207 77       		.sleb128 -9
 960 0208 00       		.byte	0
 961 0209 0C       		.uleb128 0xc
 962 020a 45010000 		.4byte	.LASF36
 963 020e 01       		.byte	0x1
 964 020f 94       		.byte	0x94
 965 0210 00000000 		.4byte	.LFB67
 966 0214 1C000000 		.4byte	.LFE67-.LFB67
 967 0218 01       		.uleb128 0x1
 968 0219 9C       		.byte	0x9c
 969 021a 0A       		.uleb128 0xa
 970 021b BC020000 		.4byte	.LASF37
 971 021f 01       		.byte	0x1
 972 0220 9F       		.byte	0x9f
 973 0221 00000000 		.4byte	.LFB68
 974 0225 0C000000 		.4byte	.LFE68-.LFB68
 975 0229 01       		.uleb128 0x1
 976 022a 9C       		.byte	0x9c
 977 022b 0A       		.uleb128 0xa
 978 022c 1B000000 		.4byte	.LASF38
 979 0230 01       		.byte	0x1
 980 0231 B0       		.byte	0xb0
 981 0232 00000000 		.4byte	.LFB69
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 23


 982 0236 58000000 		.4byte	.LFE69-.LFB69
 983 023a 01       		.uleb128 0x1
 984 023b 9C       		.byte	0x9c
 985 023c 0A       		.uleb128 0xa
 986 023d 48020000 		.4byte	.LASF39
 987 0241 01       		.byte	0x1
 988 0242 C1       		.byte	0xc1
 989 0243 00000000 		.4byte	.LFB70
 990 0247 54000000 		.4byte	.LFE70-.LFB70
 991 024b 01       		.uleb128 0x1
 992 024c 9C       		.byte	0x9c
 993 024d 0A       		.uleb128 0xa
 994 024e D0020000 		.4byte	.LASF40
 995 0252 01       		.byte	0x1
 996 0253 D9       		.byte	0xd9
 997 0254 00000000 		.4byte	.LFB71
 998 0258 5C000000 		.4byte	.LFE71-.LFB71
 999 025c 01       		.uleb128 0x1
 1000 025d 9C       		.byte	0x9c
 1001 025e 0A       		.uleb128 0xa
 1002 025f D7010000 		.4byte	.LASF41
 1003 0263 01       		.byte	0x1
 1004 0264 F4       		.byte	0xf4
 1005 0265 00000000 		.4byte	.LFB72
 1006 0269 64000000 		.4byte	.LFE72-.LFB72
 1007 026d 01       		.uleb128 0x1
 1008 026e 9C       		.byte	0x9c
 1009 026f 0D       		.uleb128 0xd
 1010 0270 1F020000 		.4byte	.LASF42
 1011 0274 06       		.byte	0x6
 1012 0275 1207     		.2byte	0x712
 1013 0277 7B020000 		.4byte	0x27b
 1014 027b 0E       		.uleb128 0xe
 1015 027c CE000000 		.4byte	0xce
 1016 0280 0F       		.uleb128 0xf
 1017 0281 3B010000 		.4byte	.LASF43
 1018 0285 04       		.byte	0x4
 1019 0286 30       		.byte	0x30
 1020 0287 8B020000 		.4byte	0x28b
 1021 028b 0E       		.uleb128 0xe
 1022 028c 4D010000 		.4byte	0x14d
 1023 0290 10       		.uleb128 0x10
 1024 0291 09030000 		.4byte	.LASF44
 1025 0295 01       		.byte	0x1
 1026 0296 1F       		.byte	0x1f
 1027 0297 A1020000 		.4byte	0x2a1
 1028 029b 05       		.uleb128 0x5
 1029 029c 03       		.byte	0x3
 1030 029d 00000000 		.4byte	hybrid_state
 1031 02a1 0E       		.uleb128 0xe
 1032 02a2 79010000 		.4byte	0x179
 1033 02a6 00       		.byte	0
 1034              		.section	.debug_abbrev,"",%progbits
 1035              	.Ldebug_abbrev0:
 1036 0000 01       		.uleb128 0x1
 1037 0001 11       		.uleb128 0x11
 1038 0002 01       		.byte	0x1
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 24


 1039 0003 25       		.uleb128 0x25
 1040 0004 0E       		.uleb128 0xe
 1041 0005 13       		.uleb128 0x13
 1042 0006 0B       		.uleb128 0xb
 1043 0007 03       		.uleb128 0x3
 1044 0008 0E       		.uleb128 0xe
 1045 0009 1B       		.uleb128 0x1b
 1046 000a 0E       		.uleb128 0xe
 1047 000b 55       		.uleb128 0x55
 1048 000c 17       		.uleb128 0x17
 1049 000d 11       		.uleb128 0x11
 1050 000e 01       		.uleb128 0x1
 1051 000f 10       		.uleb128 0x10
 1052 0010 17       		.uleb128 0x17
 1053 0011 00       		.byte	0
 1054 0012 00       		.byte	0
 1055 0013 02       		.uleb128 0x2
 1056 0014 16       		.uleb128 0x16
 1057 0015 00       		.byte	0
 1058 0016 03       		.uleb128 0x3
 1059 0017 0E       		.uleb128 0xe
 1060 0018 3A       		.uleb128 0x3a
 1061 0019 0B       		.uleb128 0xb
 1062 001a 3B       		.uleb128 0x3b
 1063 001b 0B       		.uleb128 0xb
 1064 001c 49       		.uleb128 0x49
 1065 001d 13       		.uleb128 0x13
 1066 001e 00       		.byte	0
 1067 001f 00       		.byte	0
 1068 0020 03       		.uleb128 0x3
 1069 0021 24       		.uleb128 0x24
 1070 0022 00       		.byte	0
 1071 0023 0B       		.uleb128 0xb
 1072 0024 0B       		.uleb128 0xb
 1073 0025 3E       		.uleb128 0x3e
 1074 0026 0B       		.uleb128 0xb
 1075 0027 03       		.uleb128 0x3
 1076 0028 0E       		.uleb128 0xe
 1077 0029 00       		.byte	0
 1078 002a 00       		.byte	0
 1079 002b 04       		.uleb128 0x4
 1080 002c 24       		.uleb128 0x24
 1081 002d 00       		.byte	0
 1082 002e 0B       		.uleb128 0xb
 1083 002f 0B       		.uleb128 0xb
 1084 0030 3E       		.uleb128 0x3e
 1085 0031 0B       		.uleb128 0xb
 1086 0032 03       		.uleb128 0x3
 1087 0033 08       		.uleb128 0x8
 1088 0034 00       		.byte	0
 1089 0035 00       		.byte	0
 1090 0036 05       		.uleb128 0x5
 1091 0037 13       		.uleb128 0x13
 1092 0038 01       		.byte	0x1
 1093 0039 0B       		.uleb128 0xb
 1094 003a 0B       		.uleb128 0xb
 1095 003b 3A       		.uleb128 0x3a
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 25


 1096 003c 0B       		.uleb128 0xb
 1097 003d 3B       		.uleb128 0x3b
 1098 003e 0B       		.uleb128 0xb
 1099 003f 01       		.uleb128 0x1
 1100 0040 13       		.uleb128 0x13
 1101 0041 00       		.byte	0
 1102 0042 00       		.byte	0
 1103 0043 06       		.uleb128 0x6
 1104 0044 0D       		.uleb128 0xd
 1105 0045 00       		.byte	0
 1106 0046 03       		.uleb128 0x3
 1107 0047 08       		.uleb128 0x8
 1108 0048 3A       		.uleb128 0x3a
 1109 0049 0B       		.uleb128 0xb
 1110 004a 3B       		.uleb128 0x3b
 1111 004b 0B       		.uleb128 0xb
 1112 004c 49       		.uleb128 0x49
 1113 004d 13       		.uleb128 0x13
 1114 004e 38       		.uleb128 0x38
 1115 004f 0B       		.uleb128 0xb
 1116 0050 00       		.byte	0
 1117 0051 00       		.byte	0
 1118 0052 07       		.uleb128 0x7
 1119 0053 0D       		.uleb128 0xd
 1120 0054 00       		.byte	0
 1121 0055 03       		.uleb128 0x3
 1122 0056 0E       		.uleb128 0xe
 1123 0057 3A       		.uleb128 0x3a
 1124 0058 0B       		.uleb128 0xb
 1125 0059 3B       		.uleb128 0x3b
 1126 005a 0B       		.uleb128 0xb
 1127 005b 49       		.uleb128 0x49
 1128 005c 13       		.uleb128 0x13
 1129 005d 38       		.uleb128 0x38
 1130 005e 0B       		.uleb128 0xb
 1131 005f 00       		.byte	0
 1132 0060 00       		.byte	0
 1133 0061 08       		.uleb128 0x8
 1134 0062 2E       		.uleb128 0x2e
 1135 0063 01       		.byte	0x1
 1136 0064 3F       		.uleb128 0x3f
 1137 0065 19       		.uleb128 0x19
 1138 0066 03       		.uleb128 0x3
 1139 0067 0E       		.uleb128 0xe
 1140 0068 3A       		.uleb128 0x3a
 1141 0069 0B       		.uleb128 0xb
 1142 006a 3B       		.uleb128 0x3b
 1143 006b 0B       		.uleb128 0xb
 1144 006c 27       		.uleb128 0x27
 1145 006d 19       		.uleb128 0x19
 1146 006e 49       		.uleb128 0x49
 1147 006f 13       		.uleb128 0x13
 1148 0070 11       		.uleb128 0x11
 1149 0071 01       		.uleb128 0x1
 1150 0072 12       		.uleb128 0x12
 1151 0073 06       		.uleb128 0x6
 1152 0074 40       		.uleb128 0x40
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 26


 1153 0075 18       		.uleb128 0x18
 1154 0076 9742     		.uleb128 0x2117
 1155 0078 19       		.uleb128 0x19
 1156 0079 01       		.uleb128 0x1
 1157 007a 13       		.uleb128 0x13
 1158 007b 00       		.byte	0
 1159 007c 00       		.byte	0
 1160 007d 09       		.uleb128 0x9
 1161 007e 05       		.uleb128 0x5
 1162 007f 00       		.byte	0
 1163 0080 03       		.uleb128 0x3
 1164 0081 0E       		.uleb128 0xe
 1165 0082 3A       		.uleb128 0x3a
 1166 0083 0B       		.uleb128 0xb
 1167 0084 3B       		.uleb128 0x3b
 1168 0085 0B       		.uleb128 0xb
 1169 0086 49       		.uleb128 0x49
 1170 0087 13       		.uleb128 0x13
 1171 0088 02       		.uleb128 0x2
 1172 0089 18       		.uleb128 0x18
 1173 008a 00       		.byte	0
 1174 008b 00       		.byte	0
 1175 008c 0A       		.uleb128 0xa
 1176 008d 2E       		.uleb128 0x2e
 1177 008e 00       		.byte	0
 1178 008f 3F       		.uleb128 0x3f
 1179 0090 19       		.uleb128 0x19
 1180 0091 03       		.uleb128 0x3
 1181 0092 0E       		.uleb128 0xe
 1182 0093 3A       		.uleb128 0x3a
 1183 0094 0B       		.uleb128 0xb
 1184 0095 3B       		.uleb128 0x3b
 1185 0096 0B       		.uleb128 0xb
 1186 0097 11       		.uleb128 0x11
 1187 0098 01       		.uleb128 0x1
 1188 0099 12       		.uleb128 0x12
 1189 009a 06       		.uleb128 0x6
 1190 009b 40       		.uleb128 0x40
 1191 009c 18       		.uleb128 0x18
 1192 009d 9642     		.uleb128 0x2116
 1193 009f 19       		.uleb128 0x19
 1194 00a0 00       		.byte	0
 1195 00a1 00       		.byte	0
 1196 00a2 0B       		.uleb128 0xb
 1197 00a3 2E       		.uleb128 0x2e
 1198 00a4 01       		.byte	0x1
 1199 00a5 3F       		.uleb128 0x3f
 1200 00a6 19       		.uleb128 0x19
 1201 00a7 03       		.uleb128 0x3
 1202 00a8 0E       		.uleb128 0xe
 1203 00a9 3A       		.uleb128 0x3a
 1204 00aa 0B       		.uleb128 0xb
 1205 00ab 3B       		.uleb128 0x3b
 1206 00ac 0B       		.uleb128 0xb
 1207 00ad 27       		.uleb128 0x27
 1208 00ae 19       		.uleb128 0x19
 1209 00af 11       		.uleb128 0x11
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 27


 1210 00b0 01       		.uleb128 0x1
 1211 00b1 12       		.uleb128 0x12
 1212 00b2 06       		.uleb128 0x6
 1213 00b3 40       		.uleb128 0x40
 1214 00b4 18       		.uleb128 0x18
 1215 00b5 9642     		.uleb128 0x2116
 1216 00b7 19       		.uleb128 0x19
 1217 00b8 01       		.uleb128 0x1
 1218 00b9 13       		.uleb128 0x13
 1219 00ba 00       		.byte	0
 1220 00bb 00       		.byte	0
 1221 00bc 0C       		.uleb128 0xc
 1222 00bd 2E       		.uleb128 0x2e
 1223 00be 00       		.byte	0
 1224 00bf 3F       		.uleb128 0x3f
 1225 00c0 19       		.uleb128 0x19
 1226 00c1 03       		.uleb128 0x3
 1227 00c2 0E       		.uleb128 0xe
 1228 00c3 3A       		.uleb128 0x3a
 1229 00c4 0B       		.uleb128 0xb
 1230 00c5 3B       		.uleb128 0x3b
 1231 00c6 0B       		.uleb128 0xb
 1232 00c7 11       		.uleb128 0x11
 1233 00c8 01       		.uleb128 0x1
 1234 00c9 12       		.uleb128 0x12
 1235 00ca 06       		.uleb128 0x6
 1236 00cb 40       		.uleb128 0x40
 1237 00cc 18       		.uleb128 0x18
 1238 00cd 9742     		.uleb128 0x2117
 1239 00cf 19       		.uleb128 0x19
 1240 00d0 00       		.byte	0
 1241 00d1 00       		.byte	0
 1242 00d2 0D       		.uleb128 0xd
 1243 00d3 34       		.uleb128 0x34
 1244 00d4 00       		.byte	0
 1245 00d5 03       		.uleb128 0x3
 1246 00d6 0E       		.uleb128 0xe
 1247 00d7 3A       		.uleb128 0x3a
 1248 00d8 0B       		.uleb128 0xb
 1249 00d9 3B       		.uleb128 0x3b
 1250 00da 05       		.uleb128 0x5
 1251 00db 49       		.uleb128 0x49
 1252 00dc 13       		.uleb128 0x13
 1253 00dd 3F       		.uleb128 0x3f
 1254 00de 19       		.uleb128 0x19
 1255 00df 3C       		.uleb128 0x3c
 1256 00e0 19       		.uleb128 0x19
 1257 00e1 00       		.byte	0
 1258 00e2 00       		.byte	0
 1259 00e3 0E       		.uleb128 0xe
 1260 00e4 35       		.uleb128 0x35
 1261 00e5 00       		.byte	0
 1262 00e6 49       		.uleb128 0x49
 1263 00e7 13       		.uleb128 0x13
 1264 00e8 00       		.byte	0
 1265 00e9 00       		.byte	0
 1266 00ea 0F       		.uleb128 0xf
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 28


 1267 00eb 34       		.uleb128 0x34
 1268 00ec 00       		.byte	0
 1269 00ed 03       		.uleb128 0x3
 1270 00ee 0E       		.uleb128 0xe
 1271 00ef 3A       		.uleb128 0x3a
 1272 00f0 0B       		.uleb128 0xb
 1273 00f1 3B       		.uleb128 0x3b
 1274 00f2 0B       		.uleb128 0xb
 1275 00f3 49       		.uleb128 0x49
 1276 00f4 13       		.uleb128 0x13
 1277 00f5 3F       		.uleb128 0x3f
 1278 00f6 19       		.uleb128 0x19
 1279 00f7 3C       		.uleb128 0x3c
 1280 00f8 19       		.uleb128 0x19
 1281 00f9 00       		.byte	0
 1282 00fa 00       		.byte	0
 1283 00fb 10       		.uleb128 0x10
 1284 00fc 34       		.uleb128 0x34
 1285 00fd 00       		.byte	0
 1286 00fe 03       		.uleb128 0x3
 1287 00ff 0E       		.uleb128 0xe
 1288 0100 3A       		.uleb128 0x3a
 1289 0101 0B       		.uleb128 0xb
 1290 0102 3B       		.uleb128 0x3b
 1291 0103 0B       		.uleb128 0xb
 1292 0104 49       		.uleb128 0x49
 1293 0105 13       		.uleb128 0x13
 1294 0106 3F       		.uleb128 0x3f
 1295 0107 19       		.uleb128 0x19
 1296 0108 02       		.uleb128 0x2
 1297 0109 18       		.uleb128 0x18
 1298 010a 00       		.byte	0
 1299 010b 00       		.byte	0
 1300 010c 00       		.byte	0
 1301              		.section	.debug_aranges,"",%progbits
 1302 0000 64000000 		.4byte	0x64
 1303 0004 0200     		.2byte	0x2
 1304 0006 00000000 		.4byte	.Ldebug_info0
 1305 000a 04       		.byte	0x4
 1306 000b 00       		.byte	0
 1307 000c 0000     		.2byte	0
 1308 000e 0000     		.2byte	0
 1309 0010 00000000 		.4byte	.LFB63
 1310 0014 3C000000 		.4byte	.LFE63-.LFB63
 1311 0018 00000000 		.4byte	.LFB64
 1312 001c 2C000000 		.4byte	.LFE64-.LFB64
 1313 0020 00000000 		.4byte	.LFB65
 1314 0024 1C000000 		.4byte	.LFE65-.LFB65
 1315 0028 00000000 		.4byte	.LFB66
 1316 002c D4000000 		.4byte	.LFE66-.LFB66
 1317 0030 00000000 		.4byte	.LFB67
 1318 0034 1C000000 		.4byte	.LFE67-.LFB67
 1319 0038 00000000 		.4byte	.LFB68
 1320 003c 0C000000 		.4byte	.LFE68-.LFB68
 1321 0040 00000000 		.4byte	.LFB69
 1322 0044 58000000 		.4byte	.LFE69-.LFB69
 1323 0048 00000000 		.4byte	.LFB70
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 29


 1324 004c 54000000 		.4byte	.LFE70-.LFB70
 1325 0050 00000000 		.4byte	.LFB71
 1326 0054 5C000000 		.4byte	.LFE71-.LFB71
 1327 0058 00000000 		.4byte	.LFB72
 1328 005c 64000000 		.4byte	.LFE72-.LFB72
 1329 0060 00000000 		.4byte	0
 1330 0064 00000000 		.4byte	0
 1331              		.section	.debug_ranges,"",%progbits
 1332              	.Ldebug_ranges0:
 1333 0000 00000000 		.4byte	.LFB63
 1334 0004 3C000000 		.4byte	.LFE63
 1335 0008 00000000 		.4byte	.LFB64
 1336 000c 2C000000 		.4byte	.LFE64
 1337 0010 00000000 		.4byte	.LFB65
 1338 0014 1C000000 		.4byte	.LFE65
 1339 0018 00000000 		.4byte	.LFB66
 1340 001c D4000000 		.4byte	.LFE66
 1341 0020 00000000 		.4byte	.LFB67
 1342 0024 1C000000 		.4byte	.LFE67
 1343 0028 00000000 		.4byte	.LFB68
 1344 002c 0C000000 		.4byte	.LFE68
 1345 0030 00000000 		.4byte	.LFB69
 1346 0034 58000000 		.4byte	.LFE69
 1347 0038 00000000 		.4byte	.LFB70
 1348 003c 54000000 		.4byte	.LFE70
 1349 0040 00000000 		.4byte	.LFB71
 1350 0044 5C000000 		.4byte	.LFE71
 1351 0048 00000000 		.4byte	.LFB72
 1352 004c 64000000 		.4byte	.LFE72
 1353 0050 00000000 		.4byte	0
 1354 0054 00000000 		.4byte	0
 1355              		.section	.debug_line,"",%progbits
 1356              	.Ldebug_line0:
 1357 0000 A4020000 		.section	.debug_str,"MS",%progbits,1
 1357      02007301 
 1357      00000201 
 1357      FB0E0D00 
 1357      01010101 
 1358              	.LASF11:
 1359 0000 6C6F6E67 		.ascii	"long long int\000"
 1359      206C6F6E 
 1359      6720696E 
 1359      7400
 1360              	.LASF34:
 1361 000e 73656C5F 		.ascii	"sel_strategy\000"
 1361      73747261 
 1361      74656779 
 1361      00
 1362              	.LASF38:
 1363 001b 5365745F 		.ascii	"Set_Strategy_Launch_Assist\000"
 1363      53747261 
 1363      74656779 
 1363      5F4C6175 
 1363      6E63685F 
 1364              	.LASF0:
 1365 0036 5F5F696E 		.ascii	"__int8_t\000"
 1365      74385F74 
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 30


 1365      00
 1366              	.LASF1:
 1367 003f 5F5F7569 		.ascii	"__uint8_t\000"
 1367      6E74385F 
 1367      7400
 1368              	.LASF32:
 1369 0049 4D61705F 		.ascii	"Map_Duty_Cycle\000"
 1369      44757479 
 1369      5F437963 
 1369      6C6500
 1370              	.LASF45:
 1371 0058 474E5520 		.ascii	"GNU C11 5.4.1 20160609 (release) [ARM/embedded-5-br"
 1371      43313120 
 1371      352E342E 
 1371      31203230 
 1371      31363036 
 1372 008b 616E6368 		.ascii	"anch revision 237715] -mcpu=cortex-m3 -mthumb -g -O"
 1372      20726576 
 1372      6973696F 
 1372      6E203233 
 1372      37373135 
 1373 00be 30202D66 		.ascii	"0 -ffunction-sections -ffat-lto-objects\000"
 1373      66756E63 
 1373      74696F6E 
 1373      2D736563 
 1373      74696F6E 
 1374              	.LASF4:
 1375 00e6 5F5F696E 		.ascii	"__int16_t\000"
 1375      7431365F 
 1375      7400
 1376              	.LASF8:
 1377 00f0 5F5F696E 		.ascii	"__int32_t\000"
 1377      7433325F 
 1377      7400
 1378              	.LASF47:
 1379 00fa 433A5C55 		.ascii	"C:\\Users\\badea\\Documents\\PSoC Creator\\can_bun\\"
 1379      73657273 
 1379      5C626164 
 1379      65615C44 
 1379      6F63756D 
 1380 0128 48434D5F 		.ascii	"HCM_UPBDrive.cydsn\000"
 1380      55504244 
 1380      72697665 
 1380      2E637964 
 1380      736E00
 1381              	.LASF43:
 1382 013b 6361725F 		.ascii	"car_state\000"
 1382      73746174 
 1382      6500
 1383              	.LASF36:
 1384 0145 5365745F 		.ascii	"Set_Strategy_Freewheel\000"
 1384      53747261 
 1384      74656779 
 1384      5F467265 
 1384      65776865 
 1385              	.LASF29:
 1386 015c 64757479 		.ascii	"duty_cycle_percentage\000"
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 31


 1386      5F637963 
 1386      6C655F70 
 1386      65726365 
 1386      6E746167 
 1387              	.LASF25:
 1388 0172 67656172 		.ascii	"gear\000"
 1388      00
 1389              	.LASF14:
 1390 0177 696E7438 		.ascii	"int8_t\000"
 1390      5F7400
 1391              	.LASF18:
 1392 017e 696E7433 		.ascii	"int32_t\000"
 1392      325F7400 
 1393              	.LASF19:
 1394 0186 666C6F61 		.ascii	"float\000"
 1394      7400
 1395              	.LASF2:
 1396 018c 7369676E 		.ascii	"signed char\000"
 1396      65642063 
 1396      68617200 
 1397              	.LASF26:
 1398 0198 6272616B 		.ascii	"brake_state\000"
 1398      655F7374 
 1398      61746500 
 1399              	.LASF3:
 1400 01a4 756E7369 		.ascii	"unsigned char\000"
 1400      676E6564 
 1400      20636861 
 1400      7200
 1401              	.LASF10:
 1402 01b2 6C6F6E67 		.ascii	"long unsigned int\000"
 1402      20756E73 
 1402      69676E65 
 1402      6420696E 
 1402      7400
 1403              	.LASF7:
 1404 01c4 73686F72 		.ascii	"short unsigned int\000"
 1404      7420756E 
 1404      7369676E 
 1404      65642069 
 1404      6E7400
 1405              	.LASF41:
 1406 01d7 5365745F 		.ascii	"Set_Strategy_Auto_Always_Regen\000"
 1406      53747261 
 1406      74656779 
 1406      5F417574 
 1406      6F5F416C 
 1407              	.LASF28:
 1408 01f6 64726976 		.ascii	"driving_mode\000"
 1408      696E675F 
 1408      6D6F6465 
 1408      00
 1409              	.LASF6:
 1410 0203 5F5F7569 		.ascii	"__uint16_t\000"
 1410      6E743136 
 1410      5F7400
 1411              	.LASF20:
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 32


 1412 020e 646F7562 		.ascii	"double\000"
 1412      6C6500
 1413              	.LASF5:
 1414 0215 73686F72 		.ascii	"short int\000"
 1414      7420696E 
 1414      7400
 1415              	.LASF42:
 1416 021f 49544D5F 		.ascii	"ITM_RxBuffer\000"
 1416      52784275 
 1416      66666572 
 1416      00
 1417              	.LASF13:
 1418 022c 756E7369 		.ascii	"unsigned int\000"
 1418      676E6564 
 1418      20696E74 
 1418      00
 1419              	.LASF33:
 1420 0239 7470735F 		.ascii	"tps_percentage\000"
 1420      70657263 
 1420      656E7461 
 1420      676500
 1421              	.LASF39:
 1422 0248 5365745F 		.ascii	"Set_Strategy_Auto_No_Regen\000"
 1422      53747261 
 1422      74656779 
 1422      5F417574 
 1422      6F5F4E6F 
 1423              	.LASF12:
 1424 0263 6C6F6E67 		.ascii	"long long unsigned int\000"
 1424      206C6F6E 
 1424      6720756E 
 1424      7369676E 
 1424      65642069 
 1425              	.LASF15:
 1426 027a 75696E74 		.ascii	"uint8_t\000"
 1426      385F7400 
 1427              	.LASF16:
 1428 0282 696E7431 		.ascii	"int16_t\000"
 1428      365F7400 
 1429              	.LASF31:
 1430 028a 5450535F 		.ascii	"TPS_to_Duty_Cycle_Percentage\000"
 1430      746F5F44 
 1430      7574795F 
 1430      4379636C 
 1430      655F5065 
 1431              	.LASF22:
 1432 02a7 6C6F6E67 		.ascii	"long double\000"
 1432      20646F75 
 1432      626C6500 
 1433              	.LASF23:
 1434 02b3 73697A65 		.ascii	"sizetype\000"
 1434      74797065 
 1434      00
 1435              	.LASF37:
 1436 02bc 5365745F 		.ascii	"Set_Strategy_Manual\000"
 1436      53747261 
 1436      74656779 
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 33


 1436      5F4D616E 
 1436      75616C00 
 1437              	.LASF40:
 1438 02d0 5365745F 		.ascii	"Set_Strategy_Auto_Brake_Regen\000"
 1438      53747261 
 1438      74656779 
 1438      5F417574 
 1438      6F5F4272 
 1439              	.LASF21:
 1440 02ee 63686172 		.ascii	"char\000"
 1440      00
 1441              	.LASF48:
 1442 02f3 5365745F 		.ascii	"Set_Strategy\000"
 1442      53747261 
 1442      74656779 
 1442      00
 1443              	.LASF17:
 1444 0300 75696E74 		.ascii	"uint16_t\000"
 1444      31365F74 
 1444      00
 1445              	.LASF44:
 1446 0309 68796272 		.ascii	"hybrid_state\000"
 1446      69645F73 
 1446      74617465 
 1446      00
 1447              	.LASF9:
 1448 0316 6C6F6E67 		.ascii	"long int\000"
 1448      20696E74 
 1448      00
 1449              	.LASF46:
 1450 031f 7372635C 		.ascii	"src\\hybrid_mode.c\000"
 1450      68796272 
 1450      69645F6D 
 1450      6F64652E 
 1450      6300
 1451              	.LASF35:
 1452 0331 456D6572 		.ascii	"Emergency_Stop\000"
 1452      67656E63 
 1452      795F5374 
 1452      6F7000
 1453              	.LASF24:
 1454 0340 656E6769 		.ascii	"engine_state\000"
 1454      6E655F73 
 1454      74617465 
 1454      00
 1455              	.LASF27:
 1456 034d 76656869 		.ascii	"vehicle_status_t\000"
 1456      636C655F 
 1456      73746174 
 1456      75735F74 
 1456      00
 1457              	.LASF30:
 1458 035e 48595F73 		.ascii	"HY_strategy_t\000"
 1458      74726174 
 1458      6567795F 
 1458      7400
 1459              		.ident	"GCC: (GNU Tools for ARM Embedded Processors) 5.4.1 20160609 (release) [ARM/embedded-5-bran
ARM GAS  C:\Users\badea\AppData\Local\Temp\cc2TzSSX.s 			page 34


